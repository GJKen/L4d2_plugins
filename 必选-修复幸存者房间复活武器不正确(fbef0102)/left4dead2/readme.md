# 📌修复在战役/写实模式中重新复活或救援房间救活的时候, 武器不一样

原作 [GIthub](https://github.com/fbef0102/L4D2-Plugins/tree/master/l4d_death_weapon_respawn_fix)

<details><summary>简介</summary>

安装这个插件不会影响过关携带的武器

- 新获救的幸存者一开始拥有50点实血, 一件随机的T1级武器(单喷或者机枪)和一把手枪

- T1级武器取决于你死亡时拥有的武器:
	- 如果你死于突击步枪(Scar, AK-47 或 M16), 你将带着冲锋枪重生(在 L4D2 有机会获得消音Smg);
	- 如果您使用霰弹枪(铁喷, 木喷, 一代连喷, 二代连喷)或榴弹死亡, 您将获得一把木喷(在 L4D2 有机会获得铁喷)
	- 如果你死于狩猎步枪或军用狙击, 你将有 60% 的几率获得冲锋枪, 40% 的几率获得霰弹枪

- 这个插件会解决以下问题
	- 倖存者灭团后重新回合会发现你的武器变成了单发散弹枪或者机枪 (这是官方的bug)
	- 如果你在战役/写实中带着任何武器和任务死亡, 你将在新一轮开始后拥有T1武器(通常发生在更改地图M2之后......)
	- 死亡时有M60, 你将以M60全弹夹重生(这是官方的bug)
</details>

---

Command | 命令
<br>None

<details><summary>Video | 影片展示</summary>

感谢 @[哈利波特](https://github.com/fbef0102) 提供的视频 > [Youtube](https://www.youtube.com/watch?v=AbfjBeQmpd8)
</details>

Image | 图示
<br>None

<details><summary>ConVar | 控制台变量</summary>

cfg\sourcemod\l4d_death_weapon_respawn_fix.cfg
```php
// This file was auto-generated by SourceMod (v1.11.0.6934)
// ConVars for plugin "l4d_death_weapon_respawn_fix.smx"

//插件版本
l4d_death_weapon_respawn_fix_version "1.1"

// 0=Plugin off, 1=Plugin on.
l4d_death_weapon_respawn_fix_enable "1"
```

cfg/server.cfg
- 这是官方cvar
```
// 在救援房间被救援时的起始武器 0: 手枪, 1: 上次死亡时主武器降成T1武器 (单发散弹枪或者机枪), 2: 上次死亡时主武器.
sm_cvar survivor_respawn_with_guns 2
```
</details>

Translation Support | 支持语言
<br>None

<details><summary>Apply to | 适用于</summary>

```php
L4D1
L4D2
```
</details>

<details><summary>Require | 需求</summary>

1. [[L4D & L4D2] Left 4 DHooks Direct](https://forums.alliedmods.net/showthread.php?t=321696)
2. [[INC] l4d2_weapons](https://github.com/fbef0102/Game-Private_Plugin/blob/main/left4dead2/scripting/include/l4d2_weapons.inc)
</details>

<details><summary>Changelog | 版本日志</summary>

    v1.1 (2023-1-12)
	    Fixed player respawns with only pistol

    v1.0 (2022-12-12)
	    Original request by Yabi
        Initial Release
</details>